<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevTool Ultimate | Bedrock Edition</title>
    <style>
        :root { --blue: #007aff; --bg: #ffffff; --card: #f5f5f7; --text: #1d1d1f; }
        body { background: var(--bg); font-family: -apple-system, system-ui, sans-serif; display: flex; justify-content: center; padding: 20px; margin: 0; color: var(--text); }
        .wrapper { width: 100%; max-width: 500px; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        header { text-align: center; margin-bottom: 25px; }
        h1 { font-size: 24px; font-weight: 700; margin: 0; letter-spacing: -0.5px; }
        .subtitle { color: #86868b; font-size: 13px; margin-top: 5px; text-transform: uppercase; letter-spacing: 1px; }

        .card { background: var(--card); border-radius: 28px; padding: 24px; box-shadow: 0 8px 30px rgba(0,0,0,0.04); border: 1px solid #e5e5ea; }
        
        textarea { width: 100%; height: 130px; border-radius: 16px; border: 1px solid #d2d2d7; padding: 15px; box-sizing: border-box; font-family: "SF Mono", monospace; font-size: 13px; outline: none; transition: 0.2s; background: #fff; margin-bottom: 12px; resize: none; }
        textarea:focus { border-color: var(--blue); box-shadow: 0 0 0 4px rgba(0,122,255,0.1); }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        button { padding: 14px; border: none; border-radius: 14px; background: #fff; color: var(--blue); font-weight: 600; font-size: 11px; cursor: pointer; transition: 0.2s; border: 1px solid #e5e5ea; text-transform: uppercase; }
        button:hover { background: var(--blue); color: #fff; transform: translateY(-1px); }
        .full { grid-column: span 2; background: #e5e5ea; color: #000; border: none; }

        .res-section { margin-top: 25px; text-align: center; }
        .status { font-size: 11px; font-weight: 700; color: #86868b; margin-bottom: 10px; display: block; }
        #output { height: 110px; background: #fafafa; border: 2px dashed #d2d2d7; cursor: copy; }
    </style>
</head>
<body>

<div class="wrapper">
    <header>
        <h1>МУЛЬТИ ИНСТРУМЕНТЫ</h1>
        <div class="subtitle">QuickJS / Minecraft Bedrock</div>
    </header>

    <div class="card">
        <textarea id="input" placeholder="Вставьте ваш код или JSON..."></textarea>
        
        <div class="grid">
            <button onclick="run('jsonToUni')">JSON > UNICODE</button>
            <button onclick="run('uniToJSON')">UNICODE > JSON</button>
            <button onclick="run('obf')">ОБФУСКАЦИЯ</button>
            <button onclick="run('deObf')">ДЕОБФУСКАЦИЯ</button>
            <button onclick="run('min')">МИНИФИКАЦИЯ</button>
            <button onclick="run('fmt')">ФОРМАТИРОВАНИЕ</button>
            <button class="full" onclick="run('uuid')">UUID ГЕНЕРАТОР</button>
        </div>

        <div class="res-section">
            <span id="statusLabel" class="status">РЕЗУЛЬТАТ ОБРАБОТКИ</span>
            <textarea id="output" readonly onclick="copy()" placeholder="Тут появится результат..."></textarea>
        </div>
    </div>
</div>

<script>
    function run(action) {
        const input = document.getElementById('input').value;
        const out = document.getElementById('output');
        if(!input && action !== 'uuid') return;

        try {
            switch(action) {
                case 'jsonToUni':
                    out.value = input.split('').map(c => '\\u' + c.charCodeAt(0).toString(16).padStart(4, '0')).join('');
                    break;
                case 'uniToJSON':
                    out.value = input.replace(/\\u([\d\w]{4})/gi, (m, g) => String.fromCharCode(parseInt(g, 16)));
                    break;
                case 'obf':
                    // Усиленная XOR-обфускация
                    const key = Math.floor(Math.random() * 255) + 1;
                    const encoded = input.split('').map(c => `String.fromCharCode(${c.charCodeAt(0) ^ key}^${key})`).join('+');
                    const v = "_0x" + Math.random().toString(16).slice(2, 6);
                    out.value = `/* Obfuscated by DevTool */\nconst ${v} = () => ${encoded};\neval(${v}());`;
                    break;
                case 'deObf':
                    // Умная деобфускация
                    const codeMatch = input.match(/fromCharCode\((.*?)\)/g);
                    if (codeMatch) {
                        out.value = codeMatch.map(m => {
                            const parts = m.match(/\d+/g);
                            return String.fromCharCode(parts.length > 1 ? parts[0] ^ parts[1] : parts[0]);
                        }).join('');
                    } else {
                        // Попытка найти HEX формат
                        const hex = input.match(/"((\\x[0-9a-fA-F]{2})+)"/);
                        out.value = hex ? hex[1].replace(/\\x([0-9a-fA-F]{2})/g, (m, g) => String.fromCharCode(parseInt(g, 16))) : "Формат не поддерживается!";
                    }
                    break;
                case 'min':
                    out.value = input.replace(/\s+/g, ' ').replace(/\/\*.*?\*\/|\/\/.*/g, '').trim();
                    break;
                case 'fmt':
                    out.value = JSON.stringify(JSON.parse(input), null, 4);
                    break;
                case 'uuid':
                    out.value = ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));
                    break;
            }
        } catch(e) { out.value = "Ошибка обработки данных!"; }
    }

    function copy() {
        const out = document.getElementById('output');
        if(!out.value) return;
        out.select();
        document.execCommand('copy');
        const label = document.getElementById('statusLabel');
        label.innerText = "СКОПИРОВАНО В БУФЕР!";
        label.style.color = "#34c759";
        setTimeout(() => { label.innerText = "РЕЗУЛЬТАТ ОБРАБОТКИ"; label.style.color = "#86868b"; }, 1500);
    }
</script>

</body>
</html>
