<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Text Tool</title>
    <style>
        :root { --bg: #f5f5f7; --card: #ffffff; --text: #1d1d1f; --accent: #0071e3; }
        .dark { --bg: #121212; --card: #1e1e1e; --text: #f5f5f7; --accent: #0a84ff; }
        
        body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, sans-serif; transition: 0.3s; display: flex; justify-content: center; min-height: 100vh; margin: 0; padding: 20px; }
        .app { width: 100%; max-width: 600px; }
        .card { background: var(--card); padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        
        h1 { font-size: 24px; font-weight: 600; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        textarea { width: 100%; height: 120px; border: 1px solid #d2d2d7; border-radius: 12px; padding: 15px; box-sizing: border-box; font-size: 16px; margin-bottom: 15px; outline: none; transition: 0.2s; background: transparent; color: inherit; }
        textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 4px rgba(0,113,227,0.1); }
        
        .stats { font-size: 12px; color: #86868b; margin-bottom: 15px; display: flex; gap: 15px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        
        button { padding: 12px; border: none; border-radius: 10px; font-weight: 500; cursor: pointer; transition: 0.2s; font-size: 14px; }
        .primary { background: var(--accent); color: white; }
        .secondary { background: #e8e8ed; color: #1d1d1f; }
        button:hover { opacity: 0.8; transform: translateY(-1px); }
        
        .theme-btn { font-size: 20px; background: none; border: none; cursor: pointer; }
    </style>
</head>
<body>

<div class="app">
    <div class="card">
        <h1>
            <span>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¢–µ–∫—Å—Ç–∞</span>
            <button class="theme-btn" onclick="document.body.classList.toggle('dark')">üåì</button>
        </h1>

        <textarea id="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å..." oninput="updateStats()"></textarea>
        
        <div class="stats">
            <span id="charCount">–°–∏–º–≤–æ–ª–æ–≤: 0</span>
            <span id="wordCount">–°–ª–æ–≤: 0</span>
        </div>

        <div class="grid">
            <button class="primary" onclick="process('toUni')">–í Unicode (\u0000)</button>
            <button class="primary" onclick="process('fromUni')">–ò–∑ Unicode</button>
            <button class="primary" onclick="process('toB64')">–í Base64 (–ö–æ–¥)</button>
            <button class="primary" onclick="process('fromB64')">–ò–∑ Base64</button>
            <button class="secondary" onclick="process('reverse')">–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å</button>
            <button class="secondary" onclick="process('clear')">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
        </div>

        <textarea id="output" placeholder="–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç..." readonly></textarea>
        
        <div class="grid">
            <button class="secondary" onclick="copy()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <button class="secondary" onclick="download()">–°–∫–∞—á–∞—Ç—å .txt</button>
        </div>
    </div>
</div>

<script>
    function updateStats() {
        const text = document.getElementById('input').value;
        document.getElementById('charCount').innerText = '–°–∏–º–≤–æ–ª–æ–≤: ' + text.length;
        document.getElementById('wordCount').innerText = '–°–ª–æ–≤: ' + (text.trim() ? text.trim().split(/\s+/).length : 0);
    }

    function process(type) {
        const input = document.getElementById('input').value;
        const output = document.getElementById('output');
        
        try {
            if (type === 'toUni') {
                output.value = input.split('').map(c => '\\u' + c.charCodeAt(0).toString(16).padStart(4, '0')).join('');
            } else if (type === 'fromUni') {
                output.value = input.replace(/\\u([\d\w]{4})/gi, (m, g) => String.fromCharCode(parseInt(g, 16)));
            } else if (type === 'toB64') {
                output.value = btoa(unescape(encodeURIComponent(input)));
            } else if (type === 'fromB64') {
                output.value = decodeURIComponent(escape(atob(input)));
            } else if (type === 'reverse') {
                output.value = input.split('').reverse().join('');
            } else if (type === 'clear') {
                document.getElementById('input').value = '';
                output.value = '';
                updateStats();
            }
        } catch(e) { output.value = "–û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö!"; }
    }

    function copy() {
        const out = document.getElementById('output');
        out.select();
        document.execCommand('copy');
        alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä!');
    }

    function download() {
        const text = document.getElementById('output').value;
        const blob = new Blob([text], {type: "text/plain"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "result.txt";
        a.click();
    }
</script>

</body>
</html>
